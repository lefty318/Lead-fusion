{
  "tech_stack": [
    "Python",
    "FastAPI",
    "SQLAlchemy",
    "PostgreSQL",
    "React",
    "TypeScript",
    "Redux",
    "Tailwind CSS",
    "Socket.IO",
    "OpenAI",
    "Pydantic",
    "Alembic",
    "pytest",
    "Axios",
    "Redis"
  ],
  "features": [
    {
      "name": "User Authentication API",
      "description": "User registration, login, and authentication with JWT tokens. Includes user management and role-based access control.",
      "files": [
        "backend/app/routes/auth.py",
        "backend/app/services/auth_service.py",
        "backend/app/models/user.py",
        "backend/app/schemas/__init__.py"
      ],
      "api_doc": {
        "openapi": "3.0.0",
        "info": {
          "title": "Authentication API",
          "version": "1.0.0"
        },
        "paths": {
          "/api/auth/register": {
            "post": {
              "summary": "Register a new user",
              "requestBody": {
                "required": true,
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "properties": {
                        "email": {"type": "string"},
                        "password": {"type": "string"},
                        "full_name": {"type": "string"},
                        "role": {"type": "string"}
                      }
                    }
                  }
                }
              },
              "responses": {
                "200": {
                  "description": "User registered successfully",
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "access_token": {"type": "string"},
                          "token_type": {"type": "string"}
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "/api/auth/login": {
            "post": {
              "summary": "Authenticate user and get JWT token",
              "requestBody": {
                "required": true,
                "content": {
                  "application/x-www-form-urlencoded": {
                    "schema": {
                      "type": "object",
                      "properties": {
                        "username": {"type": "string"},
                        "password": {"type": "string"}
                      }
                    }
                  }
                }
              },
              "responses": {
                "200": {
                  "description": "Login successful",
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "access_token": {"type": "string"},
                          "token_type": {"type": "string"}
                        }
                      }
                    }
                  }
                },
                "401": {
                  "description": "Invalid credentials"
                }
              }
            }
          },
          "/api/auth/me": {
            "get": {
              "summary": "Get current authenticated user information",
              "security": [{"bearerAuth": []}],
              "responses": {
                "200": {
                  "description": "User information",
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "id": {"type": "integer"},
                          "email": {"type": "string"},
                          "full_name": {"type": "string"},
                          "role": {"type": "string"},
                          "is_active": {"type": "boolean"}
                        }
                      }
                    }
                  }
                },
                "401": {
                  "description": "Unauthorized"
                }
              }
            }
          }
        },
        "components": {
          "securitySchemes": {
            "bearerAuth": {
              "type": "http",
              "scheme": "bearer",
              "bearerFormat": "JWT"
            }
          }
        }
      }
    },
    {
      "name": "Conversations Management API",
      "description": "Manage conversations from multiple channels (WhatsApp, Facebook, Instagram). Includes conversation listing, filtering, assignment, messaging, and real-time updates via Socket.IO.",
      "files": [
        "backend/app/routes/conversations.py",
        "backend/app/models/conversation.py",
        "backend/app/services/ai_service.py",
        "frontend/src/components/conversations/Conversations.tsx",
        "frontend/src/components/conversations/ConversationDetail.tsx"
      ],
      "api_doc": {
        "openapi": "3.0.0",
        "paths": {
          "/api/conversations/": {
            "get": {
              "summary": "Get all conversations with optional filtering",
              "security": [{"bearerAuth": []}],
              "parameters": [
                {
                  "name": "skip",
                  "in": "query",
                  "schema": {"type": "integer", "default": 0}
                },
                {
                  "name": "limit",
                  "in": "query",
                  "schema": {"type": "integer", "default": 50}
                },
                {
                  "name": "channel",
                  "in": "query",
                  "schema": {"type": "string"}
                },
                {
                  "name": "status",
                  "in": "query",
                  "schema": {"type": "string"}
                }
              ],
              "responses": {
                "200": {
                  "description": "List of conversations",
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "array",
                        "items": {"$ref": "#/components/schemas/Conversation"}
                      }
                    }
                  }
                }
              }
            }
          },
          "/api/conversations/{conversation_id}": {
            "get": {
              "summary": "Get a specific conversation",
              "security": [{"bearerAuth": []}],
              "parameters": [
                {
                  "name": "conversation_id",
                  "in": "path",
                  "required": true,
                  "schema": {"type": "integer"}
                }
              ],
              "responses": {
                "200": {
                  "description": "Conversation details"
                },
                "404": {
                  "description": "Conversation not found"
                }
              }
            }
          },
          "/api/conversations/{conversation_id}/messages": {
            "get": {
              "summary": "Get messages for a conversation",
              "security": [{"bearerAuth": []}],
              "parameters": [
                {
                  "name": "conversation_id",
                  "in": "path",
                  "required": true,
                  "schema": {"type": "integer"}
                }
              ],
              "responses": {
                "200": {
                  "description": "List of messages"
                }
              }
            }
          },
          "/api/conversations/{conversation_id}/assign": {
            "post": {
              "summary": "Assign conversation to a user",
              "security": [{"bearerAuth": []}],
              "parameters": [
                {
                  "name": "conversation_id",
                  "in": "path",
                  "required": true,
                  "schema": {"type": "integer"}
                }
              ],
              "requestBody": {
                "required": true,
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "properties": {
                        "user_id": {"type": "integer"}
                      }
                    }
                  }
                }
              },
              "responses": {
                "200": {
                  "description": "Conversation assigned successfully"
                }
              }
            }
          },
          "/api/conversations/{conversation_id}/reply": {
            "post": {
              "summary": "Send a reply to a conversation",
              "security": [{"bearerAuth": []}],
              "parameters": [
                {
                  "name": "conversation_id",
                  "in": "path",
                  "required": true,
                  "schema": {"type": "integer"}
                }
              ],
              "requestBody": {
                "required": true,
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "properties": {
                        "content": {"type": "string"}
                      }
                    }
                  }
                }
              },
              "responses": {
                "200": {
                  "description": "Reply sent successfully"
                }
              }
            }
          }
        }
      }
    },
    {
      "name": "Analytics API",
      "description": "Dashboard analytics, performance metrics, and data export functionality. Provides dashboard data, agent performance metrics, and export capabilities in CSV, XLSX, and PDF formats.",
      "files": [
        "backend/app/routes/analytics.py",
        "backend/app/models/analytics.py",
        "frontend/src/components/analytics/Analytics.tsx",
        "frontend/src/components/dashboard/Dashboard.tsx"
      ],
      "api_doc": {
        "openapi": "3.0.0",
        "paths": {
          "/api/analytics/dashboard": {
            "get": {
              "summary": "Get dashboard analytics data",
              "security": [{"bearerAuth": []}],
              "parameters": [
                {
                  "name": "days",
                  "in": "query",
                  "schema": {"type": "integer", "default": 30}
                }
              ],
              "responses": {
                "200": {
                  "description": "Dashboard analytics data",
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "total_conversations": {"type": "integer"},
                          "conversations_by_channel": {"type": "object"},
                          "conversations_by_status": {"type": "object"},
                          "total_leads": {"type": "integer"},
                          "leads_by_status": {"type": "object"},
                          "avg_response_time_hours": {"type": "number"},
                          "conversion_funnel": {"type": "object"}
                        }
                      }
                    }
                  }
                },
                "403": {
                  "description": "Not authorized"
                }
              }
            }
          },
          "/api/analytics/performance": {
            "get": {
              "summary": "Get user performance metrics",
              "security": [{"bearerAuth": []}],
              "responses": {
                "200": {
                  "description": "Performance metrics",
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "agent_performance": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "agent": {"type": "string"},
                                "conversations_handled": {"type": "integer"},
                                "avg_lead_score": {"type": "number"}
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "/api/analytics/export/{format}": {
            "get": {
              "summary": "Export analytics data",
              "security": [{"bearerAuth": []}],
              "parameters": [
                {
                  "name": "format",
                  "in": "path",
                  "required": true,
                  "schema": {
                    "type": "string",
                    "enum": ["csv", "xlsx", "pdf"]
                  }
                },
                {
                  "name": "days",
                  "in": "query",
                  "schema": {"type": "integer", "default": 30}
                }
              ],
              "responses": {
                "200": {
                  "description": "Exported file",
                  "content": {
                    "text/csv": {},
                    "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet": {},
                    "application/pdf": {}
                  }
                }
              }
            }
          }
        }
      }
    },
    {
      "name": "Webhooks API",
      "description": "Receive and process webhooks from WhatsApp, Facebook Messenger, and Instagram. Handles message ingestion, signature verification, and webhook verification for platform setup.",
      "files": [
        "backend/app/routes/webhooks.py",
        "backend/app/services/webhook_service.py"
      ],
      "api_doc": {
        "openapi": "3.0.0",
        "paths": {
          "/api/webhooks/whatsapp": {
            "post": {
              "summary": "Handle WhatsApp webhook",
              "responses": {
                "200": {
                  "description": "Webhook processed successfully"
                },
                "401": {
                  "description": "Invalid signature"
                }
              }
            },
            "get": {
              "summary": "WhatsApp webhook verification",
              "parameters": [
                {
                  "name": "hub.mode",
                  "in": "query",
                  "schema": {"type": "string"}
                },
                {
                  "name": "hub.verify_token",
                  "in": "query",
                  "schema": {"type": "string"}
                },
                {
                  "name": "hub.challenge",
                  "in": "query",
                  "schema": {"type": "string"}
                }
              ],
              "responses": {
                "200": {
                  "description": "Verification successful"
                },
                "403": {
                  "description": "Verification failed"
                }
              }
            }
          },
          "/api/webhooks/facebook": {
            "post": {
              "summary": "Handle Facebook Messenger webhook",
              "responses": {
                "200": {
                  "description": "Webhook processed successfully"
                }
              }
            }
          },
          "/api/webhooks/instagram": {
            "post": {
              "summary": "Handle Instagram webhook",
              "responses": {
                "200": {
                  "description": "Webhook processed successfully"
                }
              }
            }
          }
        }
      }
    },
    {
      "name": "Health Check API",
      "description": "Simple health check endpoint to verify API server status.",
      "files": [
        "backend/app/main.py"
      ],
      "api_doc": {
        "openapi": "3.0.0",
        "paths": {
          "/health": {
            "get": {
              "summary": "Health check endpoint",
              "responses": {
                "200": {
                  "description": "Server is healthy",
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "status": {"type": "string", "example": "healthy"}
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    {
      "name": "Frontend Login",
      "description": "User authentication interface with email/password login, JWT token management, and redirect to dashboard.",
      "files": [
        "frontend/src/components/auth/Login.tsx",
        "frontend/src/services/api.ts",
        "frontend/src/store/slices/authSlice.ts"
      ],
      "api_doc": {
        "type": "frontend",
        "description": "React component for user login"
      }
    },
    {
      "name": "Frontend Dashboard",
      "description": "Main dashboard displaying analytics overview, conversation statistics, and recent conversations with real-time updates.",
      "files": [
        "frontend/src/components/dashboard/Dashboard.tsx",
        "frontend/src/store/slices/analyticsSlice.ts"
      ],
      "api_doc": {
        "type": "frontend",
        "description": "React component for dashboard view"
      }
    },
    {
      "name": "Frontend Conversations",
      "description": "Conversation management interface with listing, filtering, detail view, message sending, and real-time updates via Socket.IO.",
      "files": [
        "frontend/src/components/conversations/Conversations.tsx",
        "frontend/src/components/conversations/ConversationDetail.tsx",
        "frontend/src/services/socket.ts"
      ],
      "api_doc": {
        "type": "frontend",
        "description": "React components for conversation management"
      }
    },
    {
      "name": "Frontend Analytics",
      "description": "Analytics dashboard with detailed metrics, charts, and data export functionality.",
      "files": [
        "frontend/src/components/analytics/Analytics.tsx"
      ],
      "api_doc": {
        "type": "frontend",
        "description": "React component for analytics view"
      }
    }
  ]
}


